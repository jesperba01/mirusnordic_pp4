{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="container">
  <div class="justify-content-center py-4">  
    <h2>Welcome to your Dashboard</h2>
    <h3>Your Email: {{ user.email }}</h3>
    <form method="post" action="{% url 'change_email' %}">
      {% csrf_token %}
      <button type="submit" class="btn btn-primary">Change Email</button>
    </form>
  
    
    
      <form method="get" action="{% url 'change_password' %}">
        <button type="submit" class="btn btn-primary">Change Password</button>
      </form> 
      <h3>Your Bookings:</h3>
      {% if bookings %}
        <ul>
          {% for booking in bookings %}
            <li>
              {{ booking.date }} - {{ booking.treatment.name }}
              <form method="post" action="{% url 'cancel_booking' booking.id %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to cancel this booking?')">Cancel</button>
              </form>
            </li>
          {% endfor %}
        </ul>
    </div>
  {% else %}
    <p>No bookings found.</p>
  {% endif %}

</div>
{% endblock %}